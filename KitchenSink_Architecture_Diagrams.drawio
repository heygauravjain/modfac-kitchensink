<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="5.0" etag="xxx" version="22.1.16" type="device">
  <diagram name="High-Level Design" id="hld-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="KitchenSink Application - High-Level Design (HLD)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="350" height="30" as="geometry" />
        </mxCell>
        
        <!-- Client Layer -->
        <mxCell id="client" value="Client (Browser)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Frontend Server -->
        <mxCell id="frontend" value="Frontend Server&#xa;(Thymeleaf Templates)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="80" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- API Gateway -->
        <mxCell id="gateway" value="API Gateway&#xa;(Spring Security)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="80" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- Authentication Service -->
        <mxCell id="auth" value="Authentication Service&#xa;(JWT + Session)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="80" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- Backend Application -->
        <mxCell id="backend" value="Backend Application&#xa;(Spring Boot Services)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- Database -->
        <mxCell id="database" value="Database&#xa;(MongoDB)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- MongoDB Express -->
        <mxCell id="mongo-express" value="MongoDB Express&#xa;(Admin Interface)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="200" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- External Services -->
        <mxCell id="external" value="External Services&#xa;(Email, Logging, etc.)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="140" width="140" height="60" as="geometry" />
        </mxCell>
        
        <!-- Trust Boundaries -->
        <mxCell id="trust-boundary-1" value="Trust Boundary: Browser â†” Server" style="shape=rect;html=1;whiteSpace=wrap;fillColor=#ffcccc;strokeColor=#cc0000;strokeWidth=2;dashed=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="70" width="20" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="trust-boundary-2" value="Trust Boundary: Internal Services" style="shape=rect;html=1;whiteSpace=wrap;fillColor=#ccffcc;strokeColor=#00cc00;strokeWidth=2;dashed=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="70" width="20" height="80" as="geometry" />
        </mxCell>
        
        <!-- Connections -->
        <mxCell id="conn1" value="HTTP/HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="client" target="frontend">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn2" value="API Calls" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="frontend" target="gateway">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn3" value="JWT Validation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="gateway" target="auth">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn4" value="Business Logic" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="gateway" target="backend">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn5" value="Data Access" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="backend" target="database">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn6" value="Admin Access" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="mongo-express" target="database">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="conn7" value="External APIs" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="backend" target="external">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Data Flow Labels -->
        <mxCell id="data-flow-1" value="1. User requests page" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="160" width="120" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="data-flow-2" value="2. Server renders template" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="160" width="140" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="data-flow-3" value="3. API calls with JWT" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="450" y="160" width="140" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="data-flow-4" value="4. Business logic execution" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="280" width="140" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
  
  <diagram name="Low-Level Design" id="lld-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title-lld" value="KitchenSink Application - Low-Level Design (LLD) - UI + Auth Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="20" width="450" height="30" as="geometry" />
        </mxCell>
        
        <!-- User -->
        <mxCell id="user" value="User" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="80" height="60" as="geometry" />
        </mxCell>
        
        <!-- Login Page -->
        <mxCell id="login-page" value="Login Page&#xa;(jwt-login.html)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Auth Controller -->
        <mxCell id="auth-controller" value="Auth Controller&#xa;(JwtAuthController)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- JWT Token Service -->
        <mxCell id="jwt-service" value="JWT Token Service&#xa;(JwtTokenService)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Auth Filter -->
        <mxCell id="auth-filter" value="JWT Auth Filter&#xa;(JwtAuthenticationFilter)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="690" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- User Profile Page -->
        <mxCell id="profile-page" value="User Profile Page&#xa;(user-profile.html)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Member Controller -->
        <mxCell id="member-controller" value="Member Controller&#xa;(MemberController)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Token Storage -->
        <mxCell id="token-storage" value="Token Storage&#xa;(localStorage + Session)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Conditional UI -->
        <mxCell id="conditional-ui" value="Conditional UI Rendering&#xa;(Thymeleaf + JavaScript)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="690" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Security Context -->
        <mxCell id="security-context" value="Security Context&#xa;(Spring Security)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="860" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Database -->
        <mxCell id="db-lld" value="Database&#xa;(MongoDB)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Sequence Flow -->
        <mxCell id="seq1" value="1. User enters credentials" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="user" target="login-page">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq2" value="2. POST /jwt-login" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="login-page" target="auth-controller">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq3" value="3. Generate JWT tokens" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="auth-controller" target="jwt-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq4" value="4. Store in session" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="jwt-service" target="token-storage">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq5" value="5. Redirect to profile" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="auth-controller" target="profile-page">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq6" value="6. GET /user-profile" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="profile-page" target="member-controller">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq7" value="7. JWT validation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="member-controller" target="auth-filter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq8" value="8. Set SecurityContext" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="auth-filter" target="security-context">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq9" value="9. Load user data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="member-controller" target="db-lld">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq10" value="10. Render with user data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="member-controller" target="conditional-ui">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="seq11" value="11. Store in localStorage" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="conditional-ui" target="token-storage">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Trust Boundaries -->
        <mxCell id="trust-boundary-lld-1" value="Client Side" style="shape=rect;html=1;whiteSpace=wrap;fillColor=#ffcccc;strokeColor=#cc0000;strokeWidth=2;dashed=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="70" width="20" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="trust-boundary-lld-2" value="Server Side" style="shape=rect;html=1;whiteSpace=wrap;fillColor=#ccffcc;strokeColor=#00cc00;strokeWidth=2;dashed=1;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="70" width="20" height="80" as="geometry" />
        </mxCell>
        
        <!-- Detailed Flow Labels -->
        <mxCell id="flow-detail-1" value="A. Token Retrieval:&#xa;- From localStorage&#xa;- From hidden inputs&#xa;- From session attributes" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="400" width="200" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-detail-2" value="B. Token Verification:&#xa;- JWT signature validation&#xa;- Expiration check&#xa;- User details loading" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="400" width="200" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-detail-3" value="C. UI Rendering:&#xa;- Conditional elements&#xa;- Role-based content&#xa;- Token-based state" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="510" y="400" width="200" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="flow-detail-4" value="D. Error Handling:&#xa;- 401 Unauthorized&#xa;- 403 Forbidden&#xa;- Token expiration" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="740" y="400" width="200" height="80" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
  
  <diagram name="Sequence Flow" id="sequence-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title-seq" value="Authentication Sequence Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="350" height="30" as="geometry" />
        </mxCell>
        
        <!-- Actors -->
        <mxCell id="user-seq" value="User" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="browser-seq" value="Browser" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="80" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="server-seq" value="Server" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="80" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="auth-seq" value="Auth Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="80" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="db-seq" value="Database" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="80" width="80" height="60" as="geometry" />
        </mxCell>
        
        <!-- Sequence Lines -->
        <mxCell id="seq-line-1" value="" style="endArrow=classic;html=1;rounded=0;fontSize=10;" edge="1" parent="1" source="user-seq" target="browser-seq">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="110" as="sourcePoint" />
            <mxPoint x="290" y="60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq-line-2" value="" style="endArrow=classic;html=1;rounded=0;fontSize=10;" edge="1" parent="1" source="browser-seq" target="server-seq">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="110" as="sourcePoint" />
            <mxPoint x="440" y="60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq-line-3" value="" style="endArrow=classic;html=1;rounded=0;fontSize=10;" edge="1" parent="1" source="server-seq" target="auth-seq">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="540" y="110" as="sourcePoint" />
            <mxPoint x="590" y="60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq-line-4" value="" style="endArrow=classic;html=1;rounded=0;fontSize=10;" edge="1" parent="1" source="auth-seq" target="db-seq">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="690" y="110" as="sourcePoint" />
            <mxPoint x="740" y="60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Sequence Steps -->
        <mxCell id="step1" value="1. User enters credentials" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="160" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="step2" value="2. Browser sends POST /jwt-login" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="160" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="step3" value="3. Server validates credentials" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="350" y="160" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="step4" value="4. Auth service generates JWT" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="500" y="160" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="step5" value="5. Database stores user session" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="650" y="160" width="150" height="20" as="geometry" />
        </mxCell>
        
        <!-- Return Flow -->
        <mxCell id="return1" value="6. JWT tokens returned" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="650" y="200" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="return2" value="7. Server redirects with tokens" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="500" y="200" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="return3" value="8. Browser stores in localStorage" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="350" y="200" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="return4" value="9. User profile rendered" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="200" width="150" height="20" as="geometry" />
        </mxCell>
        
        <!-- Token Validation Flow -->
        <mxCell id="validation-title" value="Token Validation Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="280" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="validation1" value="10. User requests protected page" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="320" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="validation2" value="11. JWT Auth Filter intercepts" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="320" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="validation3" value="12. Token extracted from header" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="510" y="320" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="validation4" value="13. Token validated and user loaded" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="740" y="320" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="validation5" value="14. SecurityContext set" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="360" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="validation6" value="15. Page rendered with user data" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="360" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="validation7" value="16. Conditional UI elements shown" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="510" y="360" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="validation8" value="17. User continues using app" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="740" y="360" width="200" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
  
</mxfile> 